name = "nhl-api-proxy"
main = "src/index.ts"
compatibility_date = "2026-02-08"

# Development settings
[dev]
port = 8787

# Production environment
[env.production]
name = "nhl-api-proxy"
routes = [
  { pattern = "api.deepdivenhl.com/*", zone_name = "deepdivenhl.com" }
]

# Daily cache warming + analytics pre-computation at midnight EST (5:00 UTC)
# Processes all 32 teams: PBP + shifts + chemistry + line combos + special teams
[triggers]
crons = ["0 5 * * *"]

# KV namespace for persistent play-by-play cache
[[kv_namespaces]]
binding = "NHL_CACHE"
id = "8ff07aec89bc4bc08a17cfec41cb9102"
